{% extends "base.html" %}

{% block content %}
<div class="bg-white p-6 rounded-lg shadow-md max-w-2xl mx-auto">
    <h2 class="text-2xl font-bold text-gray-800 mb-6">
        {% if producto %}‚úèÔ∏è Editar Producto{% else %}üõí Nuevo Producto{% endif %}
    </h2>

    {% if messages %}
    <div class="mb-4">
        {% for message in messages %}
        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <form method="post" class="space-y-4">
        {% csrf_token %}

        <!-- Nombre -->
        <div>
            <label for="nombre" class="block text-sm font-medium text-gray-700">Nombre del producto</label>
            <input type="text" id="nombre" name="nombre"
                   value="{{ producto.nombre|default:'' }}"
                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm
                          focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                   required>
        </div>

        <!-- Categor√≠a -->
        <div>
            <label for="categoria" class="block text-sm font-medium text-gray-700">Categor√≠a</label>
            <select id="categoria" name="categoria"
                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm
                           focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                    required>
                <option value="">Selecciona una categor√≠a</option>
                {% for cat in categorias %}
                    <option value="{{ cat.id }}"
                        {% if producto and producto.categoria_id == cat.id %}selected{% endif %}>
                        {{ cat.nombre }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <!-- Precio -->
        <div>
            <label for="precio" class="block text-sm font-medium text-gray-700">Precio</label>
            <input type="number" step="0.01" id="precio" name="precio"
                   value="{{ producto.precio|default:'' }}"
                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm
                          focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                   required>
        </div>

        <!-- Stock -->
        <div>
            <label for="stock" class="block text-sm font-medium text-gray-700">Stock</label>
            <input type="number" id="stock" name="stock"
                   value="{{ producto.stock|default:0 }}"
                   class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm
                          focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                   required>
        </div>

        <!-- Tipo de producto -->
        <!--<div>
            <label for="tipo_producto" class="block text-sm font-medium text-gray-700">Tipo de producto</label>
            <select id="tipo_producto" name="tipo_producto"
                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm
                           focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                    required>
                <option value="ramo"
                    {% if producto and producto.tipo_producto == "ramo" %}selected{% endif %}>Ramo</option>
                <option value="arreglo"
                    {% if producto and producto.tipo_producto == "arreglo" %}selected{% endif %}>Arreglo</option>
                <option value="planta"
                    {% if producto and producto.tipo_producto == "planta" %}selected{% endif %}>Planta</option>
                <option value="accesorio"
                    {% if producto and producto.tipo_producto == "accesorio" %}selected{% endif %}>Accesorio</option>
            </select>
        </div>-->

        <!-- Disponible -->
        <div class="flex items-center">
            <input type="checkbox" id="disponible" name="disponible" value="1"
                   class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                   {% if producto %}{% if producto.disponible %}checked{% endif %}{% else %}checked{% endif %}>
            <label for="disponible" class="ml-2 block text-sm text-gray-700">
                Disponible para la venta
            </label>
        </div>

        <!-- Descripci√≥n -->
        <div>
            <label for="descripcion" class="block text-sm font-medium text-gray-700">Descripci√≥n</label>
            <textarea id="descripcion" name="descripcion" rows="3"
                      class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm
                             focus:outline-none focus:ring-blue-500 focus:border-blue-500">{{ producto.descripcion|default:'' }}</textarea>
        </div>

        <div class="flex justify-end space-x-3 pt-4">
            <a href="{% url 'ventas:productos_list' %}"
               class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded">
                Cancelar
            </a>
            <button type="submit"
                    class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded">
                {% if producto %}Actualizar{% else %}Crear{% endif %} Producto
            </button>
        </div>
    </form>
</div>
{% endblock %}
