{% extends "base.html" %}

{% block content %}
<div class="text-center mb-12">
    <h1 class="text-4xl font-bold text-gray-800 mb-4">Bienvenido al Sistema de Ventas</h1>
    <p class="text-xl text-gray-600">Gesti칩n completa de clientes, productos y ventas</p>
</div>

<!-- Estad칤sticas -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
    <div class="bg-white p-6 rounded-lg shadow-md text-center">
        <div class="text-3xl font-bold text-blue-600 mb-2">游논</div>
        <h3 class="text-lg font-semibold text-gray-800 mb-2">Clientes</h3>
        <p class="text-2xl font-bold text-gray-700">{{ total_clientes }}</p>
        <p class="text-sm text-gray-500">Registrados</p>
    </div>
    
    <div class="bg-white p-6 rounded-lg shadow-md text-center">
        <div class="text-3xl font-bold text-green-600 mb-2">游닍</div>
        <h3 class="text-lg font-semibold text-gray-800 mb-2">Productos</h3>
        <p class="text-2xl font-bold text-gray-700">{{ total_productos }}</p>
        <p class="text-sm text-gray-500">En inventario</p>
    </div>
    
    <div class="bg-white p-6 rounded-lg shadow-md text-center">
        <div class="text-3xl font-bold text-purple-600 mb-2">游눯</div>
        <h3 class="text-lg font-semibold text-gray-800 mb-2">Ventas</h3>
        <p class="text-2xl font-bold text-gray-700">{{ total_ventas }}</p>
        <p class="text-sm text-gray-500">Realizadas</p>
    </div>
</div>

<!-- Informes -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-8">
    <div class="bg-white p-6 rounded-lg shadow-md">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">游늵 Productos M치s Vendidos</h2>
        <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center">
            <canvas id="chartProductos"></canvas>
        </div>
    </div>
    
    <div class="bg-white p-6 rounded-lg shadow-md">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">游녬 Clientes con M치s Ventas</h2>
        <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center">
            <canvas id="chartClientes"></canvas>
        </div>
    </div>
</div>

<!-- Acciones R치pidas -->
<div class="mt-8 bg-white p-6 rounded-lg shadow-md">
    <h2 class="text-2xl font-bold text-gray-800 mb-4">Acciones R치pidas</h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <a href="{% url 'ventas:clientes_list' %}" class="bg-blue-500 hover:bg-blue-600 text-white text-center font-bold py-4 px-6 rounded-lg transition duration-200 text-lg">
            游논 Gestionar Clientes
        </a>
        <a href="{% url 'ventas:productos_list' %}" class="bg-green-500 hover:bg-green-600 text-white text-center font-bold py-4 px-6 rounded-lg transition duration-200 text-lg">
            游닍 Gestionar Productos
        </a>
        <a href="{% url 'ventas:ventas_list' %}" class="bg-purple-500 hover:bg-purple-600 text-white text-center font-bold py-4 px-6 rounded-lg transition duration-200 text-lg">
            游눯 Gestionar Ventas
        </a>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

{{ labels_productos|json_script:"labels_productos" }}
{{ data_productos|json_script:"data_productos" }}
{{ labels_clientes|json_script:"labels_clientes" }}
{{ data_clientes|json_script:"data_clientes" }}

<script>
  const labelsProductos = JSON.parse(document.getElementById('labels_productos').textContent);
  const dataProductos = JSON.parse(document.getElementById('data_productos').textContent);

  const labelsClientes = JSON.parse(document.getElementById('labels_clientes').textContent);
  const dataClientes = JSON.parse(document.getElementById('data_clientes').textContent);

  new Chart(document.getElementById('chartProductos'), {
    type: 'bar',
    data: {
      labels: labelsProductos,
      datasets: [{ label: 'Unidades vendidas', data: dataProductos }]
    }
  });

  new Chart(document.getElementById('chartClientes'), {
    type: 'bar',
    data: {
      labels: labelsClientes,
      datasets: [{ label: 'Cantidad de ventas', data: dataClientes }]
    }
  });
</script>
{% endblock %}